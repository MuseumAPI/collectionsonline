module.exports = {
  'Filtering on search page': function (browser) {
    browser
      .url('http://localhost:8000/search?q=charles')
      .waitForElementVisible('body', 1000)
      .click('.searchtab:nth-of-type(2)')
      .pause(5000)
      .assert.urlEquals('http://localhost:8000/search/people?q=charles&page%5Bsize%5D=50&page%5Btype%5D=search')
      .pause(1000)
      .waitForElementVisible('.filter[data-filter="Occupation"] a', 5000)
      .click('.filter[data-filter="Occupation"] a')
      .waitForElementVisible('.filter__box[value=artist]', 5000)
      .click('.filter__box[value=artist]')
      .pause(10000)
      .assert.urlEquals('http://localhost:8000/search/people?q=charles&filter%5Boccupation%5D=artist&page%5Bsize%5D=50&page%5Btype%5D=search')
      .assert.containsText('.resultcard', 'Charles Buchel')
      .click('.filter__box')
      .pause(1000)
      .assert.urlEquals('http://localhost:8000/search/people?q=charles&page%5Bsize%5D=50&page%5Btype%5D=search')
      .assert.containsText('.resultcard', 'attorney')
      .pause(1000)
      .click('.filter__box[value=inventor]')
      .pause(1000)
      .assert.urlEquals('http://localhost:8000/search/people?q=charles&filter%5Boccupation%5D=inventor&page%5Bsize%5D=50&page%5Btype%5D=search')
      .click('.filter__box[value=inventor]')
      .pause(1000)
      .waitForElementVisible('.filter[data-filter="Place born"] a', 1000)
      .click('.filter[data-filter="Place born"] a')
      .waitForElementVisible('.filter__box[value="England, United Kingdom"]', 1000)
      .click('.filter__box[value="England, United Kingdom"]')
      .pause(1000)
      .assert.urlEquals('http://localhost:8000/search/people?q=charles&filter%5Bbirth%5Bplace%5D%5D=England%2C%20United%20Kingdom&page%5Bsize%5D=50&page%5Btype%5D=search')
      .click('.filter__box[value="England, United Kingdom"]')
      .pause(1000)
      .assert.urlEquals('http://localhost:8000/search/people?q=charles&page%5Bsize%5D=50&page%5Btype%5D=search')
      .click('.filter__box[value="England, United Kingdom"]')
      .pause(1000)
      .click('.filter__box[value=chemist]')
      .pause(1000)
      .assert.urlEquals('http://localhost:8000/search/people?q=charles&filter%5Boccupation%5D=chemist&filter%5Bbirth%5Bplace%5D%5D=England%2C%20United%20Kingdom&page%5Bsize%5D=50&page%5Btype%5D=search')
      .end();
  }
};
