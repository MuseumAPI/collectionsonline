//-----------------------------------------------------------------------------
// .searchbar - the whole header section containing input, tabs, etc
//-----------------------------------------------------------------------------

.searchbar {
	background-color: mix(grey(10),$c-cyan);
	//border-bottom: 1px solid grey(20);
	background-image: linear-gradient(45deg, mix(grey(10),$c-cyan), mix(grey(10),$c-blue) );

	&__strap {
		font-size: rem-calc(30);
		font-weight: 500;
		margin: 1.5rem 0;
	}

	//searchbox placeholder text gets hidden for small, and this shown instead
	&__placeholder-for-small {
		@include breakpoint(medium) { display: none; }
		margin: 1rem 0.125rem -0.5rem;
	}
	&__strap + &__placeholder-for-small {
		margin: -1.5rem 0.125rem -0.5rem;
	}
}


//-----------------------------------------------------------------------------
// .searchbox - main search input and associated controls
//-----------------------------------------------------------------------------

.searchbox {
	position: relative;
	background-color: white;
	margin: 1rem 0;
	border: 1px solid mix(grey(20), $c-blue);
	border-radius: 0.25rem;

	&--focussed {
		border: 1px solid $c-blue;
		box-shadow: 0 2px 8px rgba(black, 0.2);
		.icon-search { fill: $c-blue; }
	}
	&__search {
		margin-right: 3.5rem;
		height: 3.5rem;
		padding: 1rem;
		border-radius: 0.25rem;
		&, &:focus { border: 0; }
		font-size: rem-calc(24);
		font-weight: 500;
		@include breakpoint(small only) {
			&::placeholder {
				color: transparent;
			}
		}
	}

	&__submit {
		height: 3.5rem;
		width: 3.5rem;
		position: absolute;
		top:0;
		right: 0;
		border: 0;
		background-color: transparent;
		color: grey(50); // applied to svg fill via magic of currentColor!
		&:hover { color: $c-blue; }
	}

	&__filters {
		padding: 0.5rem;
		border-top: 1px solid mix($c-blue, white, 25%);
	}

	//reused slightly smaller on archive section
	&--archive {
		margin-top: 0;
		.searchbox__search {
			padding: 0.5rem;
			height: 2.5rem;
			font-size: rem-calc(16);
		}
		.searchbox__submit {
			height: 2.5rem;
			width: 2.5rem;
		}
	}
}

//-----------------------------------------------------------------------------
// .typeahead styles
//-----------------------------------------------------------------------------

.twitter-typeahead {
	width: 100%;
}

.tt-menu {
	left: -1px !important;
	right: -1px !important;
	top: calc(100% - 3px) !important; // hides rounded corners on compact version, cos I can't get  a class for suggestions not being empty!
	border: 1px solid $c-blue;
	border-width: 1px;
	border-color: grey(20) $c-blue $c-blue $c-blue;
	border-radius: 0 0 0.25rem 0.25rem;
	//border-radius: 0.25rem;
	background-color: white;
	box-shadow: 0 2px 8px rgba(black, 0.2);
}
.tt-dataset {
}
.twitter-typeahead, .tt-hint, .tt-input, .tt-menu {
}
.tt-suggestion  {
	padding: 0.5rem 1rem;
}
.tt-suggestion:last-child {
	border-radius: 0 0 0.25rem 0.25rem;
}
.tt-suggestion:first-child {
	//border-radius: 0.25rem 0.25rem 0 0;
}

.tt-suggestion:hover,
.tt-cursor  {
	background-color: grey(10);
	color: $c-blue;
}
//not quite true..., its true once its enabled, not with visible choices...
[aria-expanded=true].searchbox {
	//border-radius: 0.25rem 0.25rem 0 0;
}

//-----------------------------------------------------------------------------
// .searchtabs
// â†³ .searchtab - results nav/filter within the top .searchbar
// width is tight on small screens, breakpoints to reduce and hide on smalls.
//-----------------------------------------------------------------------------

.searchtabs {
	overflow: visible;
}

.searchtab {
	display: block;
	float: left;
	padding: 0.5rem;
	margin-bottom: -1px;
	font-weight: 500;
	font-size: rem-calc(12);
	line-height: rem-calc(16); //match icn size
	@include breakpoint(medium) {
		padding: 0.5rem 1rem;
		line-height: rem-calc(24);
		font-size: rem-calc(16);
	}
	@include breakpoint(large) {
		padding: 0.5rem 2rem;
	}

	&:hover {
		background-color: rgba(0,0,0,0.1);
	}

	&--active, &--active:hover {
		background-color: grey(10);
		background-image: linear-gradient(white, grey(10) );
		//border: 1px solid grey(20);
		border-bottom: 0;
	}

	.icon {
		position: relative;
		font-size: rem-calc(12);
		top: rem-calc(2);
		@include breakpoint(medium) {
			font-size: rem-calc(24);
			top: rem-calc(6);
		}
	}

	&__label { color: black; }

	&__count {
		@include small-caps;
		color: mix($c-blue, grey(50));
		@include breakpoint(small only) { display: none; } // no room
	}
}


//-----------------------------------------------------------------------------
// .filterbadge - attached searchbox, indicate active filters
//-----------------------------------------------------------------------------

.filterbadge {
	$c: mix($c-cyan, $c-blue);
	display: inline-block;
	background: $c;
	&:hover { background: darken($c, 10%); }
	color: white;
	a:hover { color: white; }
	border-radius: 0.75rem;
	line-height: 1rem;
	margin-right: 0.5rem;
	font-weight: 500;
	font-size: rem-calc(14);
	&__label {
		display: inline-block;
		padding: rem-calc(5 6 3 8); // slight baseline shift
	}

	&__x {
		display: inline-block;
		padding: rem-calc(5 8 3 6);
		color: white;
		border-left: 1px white solid;
		&:hover { color: white; }
	}
}
