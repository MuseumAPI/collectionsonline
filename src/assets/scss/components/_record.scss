//-----------------------------------------------------------------------------
// a RECORD is a generic term for things that apply (more specifically) to
// Objects, People, Archives, Galleries
//-----------------------------------------------------------------------------

//-----------------------------------------------------------------------------
// .record-top
// above the 'fold' important things
//-----------------------------------------------------------------------------

.record-top {
	padding-top: 2rem;
	padding-bottom: 2rem;
	background: white;
	&__title {
		font-size: 3rem;
		font-weight: 600;
		.icon {
		font-size: 2rem;
		}
	}

	&__dl {
		font-size: 1.25rem;
		dt,
		dd {
			display: inline;
			margin: 0;
		}
		dt {
			@include small-caps;
		}
		dd {
			font-weight: 500;
		}
		a {
			@include text-link();
		}
	}

	&--dark {
		background: grey(80);
		color: white;

	}
}

.searchlink {
	$icnsize: 0.75em;
	position: relative;
	margin-right: $icnsize;
	&:after {
		content: ' ';
		display: block;
		position: absolute;
		right: -$icnsize+(-$icnsize/4);
		top: 0;
		bottom: 0;
		margin: auto; // top, bottom, height, auto = vertical align!
		height: $icnsize;
		width: $icnsize;
		background-image: url(/assets/icons/search.svg);
		background-size: $icnsize $icnsize;
		opacity: 0.2;
	}
	&:hover:after {
		opacity: 1;
	}
}

//-----------------------------------------------------------------------------
// .record-imgpanel
// the big image panel thing with carousel
//-----------------------------------------------------------------------------

.record-imgpanel {
	background: grey(80);
	color: white;
	border-top: 1px white solid;
	//margin-top: 2rem;
	//margin-bottom: 2rem;
	//font-size: rem-calc(14);

	&__controlbar {
		//border: 1px white solid;
		//border-width: 0 1px;
		//height: 3rem;
		position: relative;
	}

	&__caption {
		margin: 1rem 0;
		line-height: 1.2;
	}
}

.record-imgpanel__slickwrap,
.record-imgpanel__singleimgwrap {
		border: 1px white solid;
		border-width: 1px 0;
	}

@mixin imgpanelH {
	$h: 36rem; // this might change after load?
	height: $h;
	transition: height $timing-defaults;
}

.record-imgpanel__slick {
	@include imgpanelH;
	margin: 0;
	background-color: black;

	& .pic {
		@include imgpanelH;
		width: auto;
		opacity: 0.5;
		filter: blur(2px);
	}
	.slick-active .pic {
		opacity: 1;
		outline: 1px white solid;
		filter: blur(0);
	}

	//hide until initialised
	& .pic { display: none; }
	&.slick-initialized .pic { display: block; }

}

.record-imgpanel__singleimg {
	@include imgpanelH;
	margin: 0;
	background-color: grey(80);
	& .pic {
		@include imgpanelH;
		width: auto;
		display: block;
		margin: auto;
	}
}
.record-imgpanel__slickthumbs {
	position: relative;
	height: 3rem;

	.slick-dots {
		bottom:auto;
		top: 0;

		img {
			width: 3rem;
			max-width: auto;
			height: 3rem;
		}
	}
}

.record-imgpanel__thumbnav {
	margin: 0;
	padding: 0;
	overflow:auto;

	li {
		width: 3rem;
		height: 3rem;
		float: left;
		display: block;
		margin-right: -1px;
	}

	img { // these shouldnt really need fixed sizes if we know we're sending a proper sized src.
		width: 3rem;
		height: 3rem;
		display: block;
		border-color: grey(60);
		border-style: solid;
		border-width: 0 1px;
		opacity: 0.5;
	}
	.slick-active img {
		opacity: 1;
		border-color: white;
		z-index: 1;
		position: relative;
	}
}


	button {
		font-size: 1rem;
	.icon {
			position: relative;
			//@include vertical-center;
			top: rem-calc(2);
			left: rem-calc(-2);
		}
	}

.cite {
	//there's not a top level B called cite, just E's
	// inside record-imgpanel__controlbar

	&__button {
		@include button-base();
		color: white;
		border-color: white;
		//padding-left: 2rem;
		font-size: 1rem;
		&--active .icon {
		transform: rotate(270deg);
		}
	}

	&__expand {
		@include icon-before(img-expand, $size: 1.25rem);
		top:auto;
		left: auto;

		&--expanded {
			@include icon-before(img-contract, $size: 1.25rem);
		}
	}

	&__button,
	&__expand {
		float: right;
		display: block;
		color: white;
		border: 1px white solid;
		border-color: white;
		margin: rem-calc(-1 0 8 -1);
		padding: 1rem;
		&:hover { background-color: black;}
	}

	&__menu-pos-wrap { //wraps __menu to anchor position from top
		position: absolute;
		top: 0;
		right: 0;
		width: 100%;
	}
	&__menu {
		background: rgba(black,0.9);
		position: absolute;
		width: 75%;
		@include breakpoint(medium) { width: 50%; }
		@include breakpoint(large) { width: 25%; }
		right: 1rem;
		border: 1px white solid;
		bottom: 0rem;
		padding: 1rem;
		color: white;
		z-index: 1;
		box-shadow: 0 -8px 16px rgba(black, 0.3);

		display: none;
		&--active {
			display: block;
		}

		button {
			//@include button($expand:false, $background:$c-cyan, $background-hover:red, $color:$c-cyan, $style:hollow);
			@include button-base();
			color: $c-cyan;
			border-color: $c-cyan;
			float: right;
			margin-right: 0;
			//padding-left: 2rem;
			font-size: 1rem;
		}
		p {
			margin-bottom: 0.5rem;
		}
		img {
			display: block;
			margin-bottom: 0.25rem;
		}
	}
	&__method {
		overflow: auto;
		& + & {
			border-top: 1px grey(30) solid;
			padding-top: 1rem;
		}
	}
}

.osd {
	&__toolbar {
		float: right;
	}
	&__button { //todo: merge with cite__button
			float: right;
			display: block;
			color: white;
			border: 1px white solid;
			border-color: white;
			margin: rem-calc(-1 0 8 -1);
			padding: 1rem;
			&:hover { background-color: black;}

	}
}
#osd-zoomout {
	@include icon-before(osd-zoomout, $size: 1.25rem);
}
#osd-zoomin {
	@include icon-before(osd-zoomin, $size: 1.25rem);
}
#osd-fullpage {
	@include icon-before(img-expand, $size: 1.25rem);
}
#osd-home {
	@include icon-before(osd-home, $size: 1.25rem);
}

.record-description {
	font-size: rem-calc(18);
}
.record-longdesc {
	// this could be applied to a <p>
	// but may be safer to apply to wrapping <div> for bigger content
}
.record-details {
	padding-bottom: 2rem;
	border-bottom: 1px white solid;
	margin-top: 2rem;
	margin-bottom: 2rem;
	&__dl {
		@include grid-row($behavior: nest);
		padding: 0.75rem 0;

		// &:not(:last-of-type) { border-bottom: 1px grey(20) solid; }
		// need to knock it in a gutter, hence
		&:not(:last-of-type):after {
			content: ' ';
			margin: 0 0.5rem;
			background: grey(20);
			height: 1px;
			display: block;
			position: relative;
			top: 0.75rem;
		}
		dt,
		dd {
			margin: 0;
		}
		dt {
			@include grid-column(3);
			@include small-caps;
			color: grey(80);
			line-height: 1rem;
			padding-top: 0.25rem; // to match dd line-height
		}
		dd {
			@include grid-column(9);
			line-height: 1.5rem;
			//font-weight: 500;
		}
		a {
			@include text-link();
		}

		p {
			margin: 0;
		}
		p + p {
			margin-top: 1em;
		}
	}
}

//-----------------------------------------------------------------------------
// .panel
// generic box container
// if only for text, can combine .panel & .panel__text as one div
//-----------------------------------------------------------------------------

.panel {
	background-color: grey(10);
	.record-details & { //except if inside a grey panel
		background-color: white;
	}
	margin-bottom: 1rem;
	&:last-child { margin-bottom: 0 }

	&__text {
		padding: 1rem;
		font-size: rem-calc(14);
		& > * {
			line-height: 1.2;
		}
		:first-child {
			margin-top: 0;
		}
		:last-child {
			margin-bottom: 0;
		}
	}

	a { @include text-link }
	ul {
		margin: 0.5rem 0;
		padding: 0;
	}
	li {
		display: block;
		margin: 0.5rem 0;
		&:last-child {
			margin-bottom: 0;
		}
	}

	ul.related-person li {
		@include icon-bullet(person);
	}

	ul.related-article li {
		@include icon-bullet(tree-item); //obvs needs a better icon
	}

	&--cite {
		.icon { display: inline-block; }
	}
}

.taxonomy li {
	@include icon-bullet(taxonomy);
	@for $i from 0 to 5 {
	  &:nth-child(#{$i}) {
		 margin-left: $i - 0.5rem;
	  }
	}
}

.clipboard {
	padding: rem-calc(6 20 4 4);
	margin: 0.35rem 0;
	height: auto;
	box-shadow: 0;
	background-image: url(/assets/icons/clipboard.svg);
	background-size: 8px 8px;
	background-position: right 6px center;
	background-repeat: no-repeat;

	&--copied { // this class applied by js once contents copied to clipboard
		animation-name: copied;
		animation-duration: 1.5s;
		animation-timing-function: ease;
		animation-iteration-count: 1;
	}

	@keyframes copied {
		0% {
			background-color: rgba($c-cyan, 0.25);
			background-size: 12px 12px;
			background-position: right 4px center;
		}
		100% {
			background-color: #FFf;
			background-size: 8px 8px;
			background-position: right 6px center;
		}
	}
}

//-----------------------------------------------------------------------------
// .archive-tree
//
//-----------------------------------------------------------------------------

.archive-tree {
	background-color: grey(10);
	margin-bottom: 1rem;

	&__title {
		line-height: 2.5rem; // match searchbox probably to right
		margin: 0;
	}

	ul {
		margin: 0;
		padding: 0;
	}
	ul ul {
		margin-top: -1px;
	}
	li {
		display: block;
		min-height: rem-calc(40);
		clear: left;
		margin-bottom: -1px;
	}
	button {
		width: rem-calc(40);
		height: rem-calc(40);
		outline: 1px white solid;
		border-width: 0 0 1px 1px;
		float: left;
		background-size: 1rem;
		background-position: center center;
		background-repeat: no-repeat;
		position: absolute;
		&:not([disabled]):hover {
			background-color: $c-cyan;
		}

	}
	[aria-expanded="true"] button {
		background-image: url(/assets/icons/tree-contract.svg);
	}
	[aria-expanded="false"] button {
		background-image: url(/assets/icons/tree-expand.svg);
	}
	button[disabled] {
		background-image: url(/assets/icons/tree-item.svg);
	}

	button, &__label a {
		background-color: grey(20);
	}

	li li {
		margin-left: rem-calc(41);

		button, a {
			background-color: grey(30);
		}

		li button, li a {
			background-color: grey(40);
		}
	}

	.current a,
	.current button,
	.current a:hover {
			background-color: $c-cyan;
			color: black;

	}
	&__label {
		//background-color: grey(20);
		padding-left: 1px;
		overflow: auto;
		border-bottom: 1px white solid;
		border-top: 1px white solid;
		position: relative;
		margin-left: -1px;
	}

	&__label a {
		display: block;
		//float: left;
		margin-left: rem-calc(40);
		//background: red;
		padding: 0.5rem 1rem;
		border-left: 1px white solid;
		color: black;

		&:hover {
			background-color: blend-multiply( rgba($c-cyan,0.1),grey(20) );
		}
		li li &:hover {
			background-color: blend-multiply( rgba($c-cyan,0.1),grey(30) );
		}
		li li li &:hover {
			background-color: blend-multiply( rgba($c-cyan,0.1),grey(40) );
		}

	}
}

//-----------------------------------------------------------------------------
// .completeness meter
// if only html5 meter was supported...
//-----------------------------------------------------------------------------


.completeness {
	height: 1rem;
	background: grey(20);
	border-radius: 0.5rem;
	border: 4px white solid;
	box-shadow: 0 0 0 1px grey(40);
	overflow: hidden;
	text-indent: 100%;

	/*background: linear-gradient(
		to right,
		blue 0%,
		blue 19%,
		white 19%,
		white 20%,
		green 20%,
		green 39%,
		white 39%,
		white 40%,
		red 40%,
		red 59%,
		white 59%,
		white 60%,
		red 60%,
		red 79%,
		white 79%,
		white 80%,
		red 80%,
		red 100%
	);*/

	div {
		background: $c-cyan;
		border-right: 1px solid white;
	}
}

//-----------------------------------------------------------------------------
// .record-related
// related records section
// contains a bunch on smaller resultcard's
//-----------------------------------------------------------------------------



.record-related {
	margin: 2rem 0;
	//background: grey(10);
}
